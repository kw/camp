{% extends "base.html" %}
{% load rules %}
{% load markdown %}
{% load game %}
{% block head_title %}{% block body_title %}
{{ event }}
{% endblock %}{% endblock %}

{% block content %}
{% if event.event_in_progress %}
<p><i>This event is currently in progress</i></p>
{% endif %}
<ul>
  <li><b>Campaign:</b> {{event.campaign}} ({{event.logistics_year}}-{{event.logistics_month}})</li>
  <li><b>Chapter:</b> {{event.chapter}}</li>
  <li><b>Event Dates:</b> {{event.event_start_date}}-{{event.event_end_date}} ({{event.logistics_periods}} Long Rests)</li>
  {% if event.registration_open %}
  <li><b>Registration Open:</b> {{ event.registration_open|chapterzone:event.chapter }}</li>
  {% endif %}
  {% if event.registration_deadline %}
  <li><b>Registration Deadline:</b> {{ event.registration_deadline|chapterzone:event.chapter }}</li>
  {% endif %}
  {% if event.location %}
  <li><b>Location:</b> {{ event.location | markdown}}
  {% endif %}
</ul>

{% if event.description %}
{{ event.description | markdown }}
{% else %}
<p>{{event.campaign}} {{event.chapter}} event for {{event.logistics_year}}-{{event.logistics_month}}.</p>
{% endif %}

{% if event.registration_window_open %}
  <p>
  {% if not event.canceled_date %}
    <i>Event Registration Window Open! (Coming Soon™️)</i>
  {% else %}
    <i>Event has been canceled, registration not available.</i>
  {% endif %}
  </p>
{% endif %}


{% has_perm 'events.change_event' user event as can_change_event %}

{% if can_change_event %}
<p><a href="{% url 'event-update' event.pk %}">Edit Event</a></p>
{% endif %}

{% endblock content %}
